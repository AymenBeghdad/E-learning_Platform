<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />
    <link rel="stylesheet" href="category.css">
    <title>security</title>
</head>
<body>

<!-- Header start: -->
<header class="header">
  <div class="nav-container">
      <a href="home.html" class="logo">Educ-Me</a>
       <!-- Navigation Links -->
       <nav class="navbar">
        <a href="home.html">Home</a>
        <div class="dropdown">
            <a href="#" class="dropdown-btn">Categories</a>
            <ul class="dropdown-content">
                <li><a href="data-science.html">Data Science</a></li>
                <li><a href="security.html">Security</a></li>
                <li><a href="software.html">Software</a></li>
            </ul>
        </div>
        <a href="" class="scroll-to-about">About</a>
    </nav>
      <!-- Search Bar -->
      <form action="" method="post" class="search-form">
        <input type="text" name="search-box" placeholder="Search" required maxlength="30">
        <button type="submit" class="fas fa-search"></button>
    </form>

    <!-- Login and Sign Up Buttons -->
    <div class="auth-buttons">
        <a href="login.html" class="btn login-btn">Log In</a>
        <a href="signup.html" class="btn signup-btn">Sign Up</a>
    </div>
  </div>
</header>
<!-- Header end -->

<!-- Category details -->
<section class="category-details">
  <div class="category-header">
    <h2>
      <span>Cybersecurity</span><br>
      Dive into the world of cybersecurity, mastering defensive techniques and offensive strategies. Learn to safeguard networks, identify vulnerabilities, and respond to real-world security threats with confidence.
    </h2>
    <a href="cour.html" class="start-btn">Start Now</a>
  </div>

  <!-- Courses in Program Section -->
  <div class="cours">
    <h2 class="section-title">Courses in Program</h2>

    <!-- Courses Grid -->
    <div class="courses-grid">
      <div class="course-card">
        <h3 class="course-title">Course 1: Advanced Cybersecurity Fundamentals</h3>
        <p class="course-description">Learn the fundamental concepts of cybersecurity, network defense techniques, and how to protect your system from cyber threats.</p>
        <a href="#course">
          <button class="bt enrollbtn" data-course-id="1" data-course-name="Advanced Cybersecurity Fundamentals" id="key">Enroll now</button>
        </a>
      </div>
      


    </div>
  </div>
  <!-- Reusable Modal -->
<div id="keyModal" class="modal" style="display: none;">
  <div class="modal-content">
    <span class="close" id="closeModal">&times;</span>
    <h2 id="modalTitle">üîê Enrollment Key</h2>
    <p>Enter the key to enroll in <span id="courseName"></span>:</p>
    <input class="keyInput" type="text" id="keyInput" placeholder="Enter your key">
    <button id="submitKey" class="modal-button">Submit</button>
    <p id="errorMessage" style="color: red; display: none;">Invalid key! Please try again.</p>
    <p id="successMessage" style="color: green; display: none;">Enrollment successful! Redirecting...</p>
  </div>
</div>
</section>

<!-- Modal example for closing functionality (if you're using one) -->
<div class="modal" id="modal">
  <div class="modal-content">
    <span class="close-modal" id="closeModal">&times;</span>
    <p>Some modal content...</p>
  </div>
</div>

<!-- Taught By The Best Section -->
<section class="taught-section" id="taught-section">
  <h2 class="section-title">Taught By The Best</h2>
  <div class="taught-grid"> 
    <div class="courses-grid">
      <!-- Teacher 1 -->
      <div class="taught-card">
        <div class="taught-text">
          <h3>James Bennett</h3>
          <p>Cybersecurity professional with extensive experience in protecting digital systems and networks.</p>
          <div class="more">
            <p>James mentors students and professionals, helping them build careers in cybersecurity and advocating for a more secure digital future.</p>
          </div>
          <button class="read-more-btn" onclick="toggleReadMore(this)">Read More</button>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Footer Start -->
<footer class="footer">
  <div class="footer-container">
    <!-- Footer Links -->
    <div class="footer-links">
      <a href="home.html">Home</a>
      <a href="help.html">Help</a>
      <a href="conditions.html">Conditions</a>
      <a href="#reviews-section">Review</a>
    </div>

    <!-- Social Media Icons -->
    <div class="social-media-icons">
      <a href="https://www.facebook.com" target="_blank" aria-label="Facebook">
        <i class="fab fa-facebook"></i>
      </a>
      <a href="https://www.twitter.com" target="_blank" aria-label="Twitter">
        <i class="fab fa-twitter"></i>
      </a>
      <a href="https://www.linkedin.com" target="_blank" aria-label="LinkedIn">
        <i class="fab fa-linkedin"></i>
      </a>
      <a href="https://www.instagram.com" target="_blank" aria-label="Instagram">
        <i class="fab fa-instagram"></i>
      </a>
    </div>

    <!-- Footer Logo and Copyright -->
    <div class="footer-logo-container">
      <a href="home.html" class="footer-logo">Educ-Me</a>
      <p>&copy; 2024 Educ-Me. All rights reserved.</p>
    </div>
  </div>
</footer>
<!-- Footer End -->

<!-- Back to Top Button -->
<button id="backToTop" title="Go to top">‚Üë</button>

<script >
document.addEventListener('DOMContentLoaded', function () {
  const categoryName = "Security";
  const coursesGrid = document.querySelector(".courses-grid");
  const taughtGrid = document.querySelector(".taught-grid");
  let validkey = "";
  
  // Function to fetch and display courses based on category (specialty)
  function fetchCourses(category) {
    const apiUrl = `http://localhost:3000/cours-spc?Target=${encodeURIComponent(category)}`;

    fetch(apiUrl)
      .then((response) => {
        if (!response.ok) {
          throw new Error("Failed to fetch courses");
        }
        return response.json();
      })
      .then((courses) => {
        // Clear existing content
        coursesGrid.innerHTML = "";
        taughtGrid.innerHTML = "";

        let courseNumber = 1;
        const displayedTeachers = new Set(); // To avoid duplicates in the "Taught By The Best" section

        // Populate courses and teachers
        courses.forEach((course) => {
          // Add course card
          const courseCard = document.createElement("div");
          courseCard.classList.add("course-card");

          courseCard.innerHTML = `
            <h3 class="course-title">Course ${courseNumber++}: ${course.title}</h3>
            <p class="course-description">${course.Informations}</p>
            <a href="#course">
              <button class="bt enrollbtn" data-course-id=${course.ID_cours} data-course-name=${course.title} data-course-key=${course.key} id="key">Enroll now</button>
            </a>
          `;
        
          // Append the course card to the courses grid
          coursesGrid.appendChild(courseCard);
          
          // Add teacher details if not already displayed
          if (course.responsable && !displayedTeachers.has(course.responsable)) {
            displayedTeachers.add(course.responsable);

            const taughtCard = document.createElement("div");
            taughtCard.classList.add("taught-card");

            taughtCard.innerHTML = `
              <div class="taught-text">
                <h3>${course.responsable}</h3>
                <p>${course.responsable} is responsible for teaching ${course.title}.</p>
                <div class="more">
                  <p>${course.responsable} brings unique expertise and passion to the field of ${categoryName}.</p>
                </div>
                <button class="read-more-btn" onclick="toggleReadMore(this)">Read More</button>
              </div>
            `;

            taughtGrid.appendChild(taughtCard);
          }
        });

        // Now that the courses have been appended, add the event listeners for enroll buttons
        document.querySelectorAll(".enrollbtn").forEach((button) => {
          button.addEventListener("click", () => {
            // Set the course name dynamically
            const course = button.getAttribute("data-course-name");
            validkey = button.getAttribute("data-course-key");
            courseName.textContent = course;

            // Show the modal
            if (keyModal) keyModal.style.display = "block";

            // Reset input and messages
            keyInput.value = "";
            errorMessage.style.display = "none";
            successMessage.style.display = "none";
          });
        });
      })
      .catch((error) => {
        console.error("Error fetching courses:", error);
      });
  }

  // Fetch courses when the page loads
  fetchCourses(categoryName);

  // Modal elements
  const keyModal = document.getElementById("keyModal");
  const closeModal = document.getElementById("closeModal");
  const keyInput = document.getElementById("keyInput");
  const submitKey = document.getElementById("submitKey");
  const errorMessage = document.getElementById("errorMessage");
  const successMessage = document.getElementById("successMessage");
  const courseName = document.getElementById("courseName");

  // Close modal functionality
  if (closeModal) {
    closeModal.addEventListener("click", () => {
      keyModal.style.display = "none";
      keyInput.value = ""; // Clear input when modal is closed
    });
  }

  // Close modal when clicking outside of it
  window.addEventListener("click", (event) => {
    if (event.target === keyModal) {
      keyModal.style.display = "none";
      keyInput.value = ""; // Clear input when modal is closed
    }
  });

  // Handle key submission
  function handleKeySubmission() {
    const enteredKey = keyInput.value.trim();
    const validKey = validkey; // Replace with your logic for key validation

    if (enteredKey === validKey) {
      successMessage.style.display = "block";
      errorMessage.style.display = "none";

      // Clear the input field and close the modal after success
      keyInput.value = "";
      setTimeout(() => {
        keyModal.style.display = "none";
      }, 1000); // Close after 1 second
    } else {
      successMessage.style.display = "none";
      errorMessage.style.display = "block";
    }
  }

  // Handle key submission with Enter key
  if (keyInput) {
    keyInput.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        event.preventDefault(); // Prevent form submission
        handleKeySubmission();
      }
    });
  }

  // Attach event to Submit button for key validation
  if (submitKey) {
    submitKey.addEventListener("click", handleKeySubmission);
  }
});


</script>

</body>

</html>

</html>

